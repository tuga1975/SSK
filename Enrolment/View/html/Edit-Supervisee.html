<div style="width:100%;">
	<div class="header header-form-supervisee">
		<img class="logo" src="../images/logo.png" />
		<h3>Edit Supervisee</h3>
		<div class="clear"></div>
	</div>
	<div class="form-supervisee">
		<form id="superviseeFrm">
			<input class="name-supervisee" type="text" value="Edit Supervisee" disabled="disabled" />
			<nav class="nav nav-tabs">
				<a class="nav-item nav-link active" href="javascript:;">Supervisee Details</a>
				<a class="nav-item nav-link" href="javascript:api.server.LoadPage('ReprintSmartCard.html');">Issued Cards</a>
			</nav>
			<div class="tab-content" id="nav-tabContent">
			<input type="hidden" name="userId" class="userId"  />
			<div class="tab-pane fade show active" id="supervisee-details" role="tabpanel" aria-labelledby="nav-home-tab">
				<span class="s_label" >Supervisee's Biodata</span>
				<div class="s_detail" style="display:block">
					<div class="row">								
						<div class="col-7">
							<div class="row">								
								<div class="col">
									<img class="avatar" id="userPhoto1" src="../images/usr-default.jpg" />
									<input type="hidden" id="User_Photo1" name="User_Photo1" />
								</div>
								<div class="col">
									<img class="avatar" id="userPhoto2" src="../images/usr-default.jpg" />									
									<input type="hidden" id="User_Photo2" name="User_Photo2" />
								</div>
							</div>
						</div>
						<div class="col-5">
							<div class="row">
								<div class="col">
									<img class="avatar" id="LeftThumbFingerprint" src="../images/fingerprint.png" style="max-width:70%" />
								</div>
								<div class="col">
									<img class="avatar" id="RightThumbFingerprint" src="../images/fingerprint.png" style="max-width:70%" />
								</div>
							</div>
						</div>
					</div>
					<div class="row">								
						<div class="col-7" style="text-align:center;padding-top:5px;">
							<button type="button" class="btn-form" id="updatePhotos">Update Photos</button>
						</div>
                        <div class="col-5" style="text-align:center;padding-top:5px;">
                            <!--<button type="button" class="btn-form" id="updateFingerprints">Update Fingerprints</button>-->
                            <button type="button" class="btn-form" onclick="api.server.UpdateFingerprints()">Update Fingerprints</button>
                        </div>
					</div>
				</div>
				<span class="s_label">Supervisee's Address</span>
				<div class="s_detail">
					<div class="row">
						<input type="hidden" name="Address_ID" class="address_ID" />
						<div class="col">
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">BlkHouseNumber</label>
								<div class="col-sm-8">
									<input type="text" class="blkHouse_Number" name="BlkHouse_Number" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">FlrUnit Number</label>
								<div class="col-sm-8">
									<input type="text" class="flrUnit_Number" name="FlrUnit_Number" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Street Name</label>
								<div class="col-sm-8">
									<input type="text" class="street_Name" name="Street_Name" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Country</label>
								<div class="col-sm-8">
									<input type="text" class="country" name="Country" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Postal Code</label>
								<div class="col-sm-8">
									<input type="text" class="postal_Code" name="Postal_Code" />
								</div>
							</div>
						</div>
					</div>
				</div>
				<span class="s_label">Other Address</span>
				<div class="s_detail">
					<div class="row">
						<input type="hidden" name="OAddress_ID" class="Other_Address_ID" />
						<div class="col">
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">BlkHouseNumber</label>
								<div class="col-sm-8">
									<input type="text" class="o_blkHouse_Number" name="OBlkHouse_Number" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">FlrUnit Number</label>
								<div class="col-sm-8">
									<input type="text" class="o_flrUnit_Number" name="OFlrUnit_Number" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Street Name</label>
								<div class="col-sm-8">
									<input type="text" class="o_street_Name" name="OStreet_Name" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Country</label>
								<div class="col-sm-8">
									<input type="text" class="o_country" name="OCountry" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Postal Code</label>
								<div class="col-sm-8">
									<input type="text" class="o_postal_Code" name="OPostal_Code" />
								</div>
							</div>
						</div>
					</div>
				</div>
				<span class="s_label">Next Of Kin</span>
				<div class="s_detail">
					<div class="row">
						<div class="col">
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin Name</label>
								<div class="col-sm-8">
									<input type="text" class="nok_name" value="" name="NextOfKinDetailsName" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin Contact Number</label>
								<div class="col-sm-8">
									<input type="text" class="nok_contact_number" value="" name="ContactNumber" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin Relationship</label>
								<div class="col-sm-8">
									<input type="text" class="nok_relationship" value="" name="Relationship" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin BlkHouse Number</label>
								<div class="col-sm-8">
									<input type="text" class="nok_blkhousr_number" value="" name="NextOfKinDetailsHouseNumber" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin FlrUnit Number</label>
								<div class="col-sm-8">
									<input type="text" class="nok_flrunit_number" value="" name="NextOfKinDetailsUnitNumber" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin Street Name</label>
								<div class="col-sm-8">
									<input type="text" class="nok_street_name" value="" name="NextOfKinDetailsStreetName" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin Country</label>
								<div class="col-sm-8">
									<input type="text" class="nok_country" value="" name="NextOfKinDetailsCountry" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">NextOfKin PostalCode</label>
								<div class="col-sm-8">
									<input type="text" class="nok_postalcode" value="" name="NextOfKinDetailsPostalCode" />
								</div>
							</div>
						</div>
					</div>
				</div>
				<span class="s_label">Employment details</span>
				<div class="s_detail">
					<div class="row">
						<div class="col">
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Employment Name</label>
								<div class="col-sm-8">
									<input type="text" class="e_name" value="" name="EmployerName" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Employment Contact Number</label>
								<div class="col-sm-8">
									<input type="text" class="e_contact_number" value="" name="EmployerContact" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Employment Company Name</label>
								<div class="col-sm-8">
									<input type="text" class="e_company_name" value="" name="CompanyName" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Employment Job Title</label>
								<div class="col-sm-8">
									<input type="text" class="e_job_title" value="" name="JobTitle" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Employment Start Date</label>
								<div class="col-sm-8">
									<input type="text" class="e_start_date" value="" name="StartDate" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Employment End Date</label>
								<div class="col-sm-8">
									<input type="text" class="e_end_date" value="" name="EndDate" />
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-4 col-form-label">Employment Remarks</label>
								<div class="col-sm-8">
									<input type="text" class="e_remarks" value="" name="Remarks" />
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="btn-group">
					<button type="button" class="btn-form" id="SaveBtn">Save</button>
					<button type="button" class="btn-form" onclick="api.server.CancelEditSupervisee();">Cancel</button>
				</div>
			</div>
		</div>
		</form>
	</div>
</div>

<div id="pageUpdatePhotos">
    <div style="width:100%;">
        <div class="header header-form-supervisee">
            <img class="logo" src="../images/logo.png" />
            <h3>Edit Supervisee</h3>
            <div class="clear"></div>
        </div>
        <div class="form-supervisee">
            <input class="name-supervisee" type="text" value="Update Photo" disabled="disabled" />
            <div class="tab-content" id="nav-tabContent">
                <input type="hidden" name="userId" class="userId" />
                <div class="tab-pane fade show active" id="supervisee-details" role="tabpanel" aria-labelledby="nav-home-tab">
                    <div class="row updateSuperviseePhoto">
                        <div class="col-6" style="text-align:center;vertical-align:top;">
                            <div id="PopupUserPhoto1" style="background-position:center center;background-repeat:no-repeat;background-size:cover;height:200px;width:100%;background-image:url(../images/usr-default.jpg);"></div>
                            <!--<img class="avatar" id="PopupUserPhoto1" style="min-height:300px;max-height:300px;width:auto !important;" src="../images/usr-default.jpg" />-->
                            <button type="button" class="btn-form" id="updatePhoto2" onclick="api.server.OpenPictureCaptureForm('1')">Take Picture 1</button>
                        </div>
                        <div class="col-6"style="text-align:center;vertical-align:top;">
                            <div id="PopupUserPhoto2" style="background-position:center center;background-repeat:no-repeat;background-size:cover;height:200px;width:100%;background-image:url(../images/usr-default.jpg);"></div>
                            <!--<img class="avatar" id="PopupUserPhoto2" style="min-height:300px;max-height:300px;width:auto !important;" src="http://3.bp.blogspot.com/-iFUz_2u-CEg/U-grZTCf7iI/AAAAAAAABwc/AIRhqn2ocmw/7.jpg?imgmax=16383" />-->
                            <button type="button" class="btn-form" id="updatePhoto2" onclick="api.server.OpenPictureCaptureForm('2')">Take Picture 2</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button type="button" class="btn-form" onclick="hidePopUp()">Back</button>
                <!--<button type="button" class="btn-form" onclick="api.server.CancelCapturePicture();">Cancel</button>-->
            </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        $('.s_label').click(function () {
            $(this).next().fadeToggle(200);
        });
        if (api.model != null) {
			$('.userId').val(api.model.User.UserId);
			// NextOfKin
			$('.nok_name').val(api.model.UserProfile.NextOfKin_Name);
			$('.nok_contact_number').val(api.model.UserProfile.NextOfKin_Contact_Number);
			$('.nok_relationship').val(api.model.UserProfile.NextOfKin_Relationship);
			$('.nok_blkhousr_number').val(api.model.UserProfile.NextOfKin_BlkHouse_Number);
			$('.nok_flrunit_number').val(api.model.UserProfile.NextOfKin_FlrUnit_Number);
			$('.nok_street_name').val(api.model.UserProfile.NextOfKin_Street_Name);
			$('.nok_country').val(api.model.UserProfile.NextOfKin_Country);
			$('.nok_postalcode').val(api.model.UserProfile.NextOfKin_PostalCode);
			// Employment
			$('.e_name').val(api.model.UserProfile.Employment_Name);
			$('.e_contact_number').val(api.model.UserProfile.Employment_Contact_Number);
			$('.e_company_name').val(api.model.UserProfile.Employment_Company_Name);
			$('.e_job_title').val(api.model.UserProfile.Employment_Job_Title);
			$('.e_start_date').val(api.model.UserProfile.Employment_Start_Date_Text);
			$('.e_end_date').val(api.model.UserProfile.Employment_End_Date_Text);
			$('.e_remarks').val(api.model.UserProfile.Employment_Remarks);
			// Residential Address
			$('.address_ID').val(api.model.UserProfile.Residential_Addess_ID);
			$('.street_Name').val(api.model.Addresses.Street_Name);
			$('.blkHouse_Number').val(api.model.Addresses.BlkHouse_Number);
			$('.flrUnit_Number').val(api.model.Addresses.FlrUnit_Number);
			$('.country').val(api.model.Addresses.Country);
			$('.postal_Code').val(api.model.Addresses.Postal_Code);
			// Other Address
			$('.Other_Address_ID').val(api.model.UserProfile.Other_Address_ID);
			$('.o_street_Name').val(api.model.OtherAddress.Street_Name);
			$('.o_blkHouse_Number').val(api.model.OtherAddress.BlkHouse_Number);
			$('.o_flrUnit_Number').val(api.model.OtherAddress.FlrUnit_Number);
			$('.o_country').val(api.model.OtherAddress.Country);
			$('.o_postal_Code').val(api.model.OtherAddress.Postal_Code);
			// photo
			$('#User_Photo1').val(api.model.UserProfile.User_Photo1);
			$('#User_Photo2').val(api.model.UserProfile.User_Photo2);
        }

		validate();		
		$('#SaveBtn').click(function() {
			if($("#superviseeFrm").valid()){
				var $form = $("#superviseeFrm");
				var data = getFormData($form);
				var json = JSON.stringify(data);
				api.server.SaveSupervisee(json);
			}
		});
    });
	function validate(){
		$("#superviseeFrm").validate({
			rules: {
				StartDate: {date : true},
				EndDate: {date : true}
			},
			messages: {
				StartDate: { date : "Please input type Date or Empty" },
				EndDate: { date : "Please input type Date or Empty" }
			}
		});
	}
    function setPopUpPhotoServerCall(photo1, photo2) {
        $('#PopupUserPhoto1').css('background-image', 'url(data:image/jpg;base64,' + photo1+')');
        $('#PopupUserPhoto2').css('background-image', 'url(data:image/jpg;base64,' + photo2 + ')');
    }
	function setFingerprintServerCall(finger1, finger2) {
            $('#LeftThumbFingerprint').attr('src', finger1);
            $('#RightThumbFingerprint').attr('src', finger2);  
    }

	function saveNewDataToSession(){
		var $form = $("#superviseeFrm");
        var data = getFormData($form);
        var json = JSON.stringify(data);
        api.server.saveNewDataToSession(json);
	}

    /*$("#SaveBtn").on('click', function () {
        var $form = $("#superviseeFrm");
        var data = getFormData($form);
        var json = JSON.stringify(data);
        //api.server.SaveSupervisee(json);
    });*/
    //$("#superviseeFrm").submit(function(e){

    //	e.preventDefault();
    //});

    /*$('#SaveBtn').click(function () {
        var $form = $("#superviseeFrm");
        var data = getFormData($form);
        var json = JSON.stringify(data);
        api.server.SaveSupervisee(json, true);
    });*/

    $("#updatePhotos").click(function () {
        showPopUp("pageUpdatePhotos");
    });
    $("#Close_popup").click(function () {
        hidePopUp();
    })
    function showPopUp(elem_id) {
		saveNewDataToSession();
        $("#" + elem_id).show();
    }
    function hidePopUp() {
		api.server.ReplaceOldPhotos();
        $("#pageUpdatePhotos").hide();
    }

    function setAvatar(base64Str1, base64Str2) {
        if (base64Str1 != "") {
            $('#userPhoto1').attr('src', 'data:image/jpg;base64,' + base64Str1);
            $('#PopupUserPhoto1').css('background-image', 'url(data:image/jpg;base64,' + base64Str1 + ')');
        }
        if (base64Str2 != "") {
            $('#userPhoto2').attr('src', 'data:image/jpg;base64,' + base64Str2);
            $('#PopupUserPhoto2').css('background-image', 'url(data:image/jpg;base64,' + base64Str2 + ')');
        }
    }

</script>
<div class="modal fade" role="dialog" id="idQueueDrugs">
    <div class="modal-dialog" style="width:750px;">
        <div class="modal-content" style="width:750px;">
            <div class="modal-header">
                <h5 class="modal-title">Drug Test <span namedrug="time" style="margin-left:10px;font-weight:normal;font-size:13px;"></span></h5>
            </div>
            <div class="modal-body">
                <div itemview>
                    <span itemview-title title="Test Results"></span>
                </div>
                <div class="panel-data" style="padding-left:30px;">
                    <div>
                        <span drugstatus="null" namedrug="AMPH"></span>
                    </div>
                    <div>
                        <span drugstatus="null" namedrug="BENZ"></span>
                    </div>
                    <div>
                        <span drugstatus="null" namedrug="OPI"></span>
                    </div>
                    <div>
                        <span drugstatus="null" namedrug="THC"></span>
                    </div>
                </div>
                <div style="clear:both;margin-bottom:20px;"></div>
                <div itemview>
                    <span itemview-title title="Seal for following tests:"></span>
                </div>

                <!--<div>
                    <span drugchecked="null" namedrug="COCA"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="BARB"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="LSD"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="METH"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="MTQL"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="PCP"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="KET"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="BUPRE"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="CAT"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="PPZ"></span>
                </div>
                <div>
                    <span drugchecked="null" namedrug="NPS"></span>
                </div>-->
                <div style="padding-left:30px; padding-top:20px; padding-bottom:20px; float:left;width:100%;">
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input type='checkbox' id='seal-COCA' name='drugseal' value='COCA' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">COCA</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-BARB' name='drugseal' value='BARB' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">BARB</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-LSD' name='drugseal' value='LSD' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">LSD</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-METH' name='drugseal' value='METH' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">METH</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-MTQL' name='drugseal' value='MTQL' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">MTQL</span>
                    </div>
                    <br />
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input type='checkbox' id='seal-PCP' name='drugseal' value='PCP' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">PCP</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-KET' name='drugseal' value='KET' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">KET</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-BUPRE' name='drugseal' value='BUPRE' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">BUPRE</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-CAT' name='drugseal' value='CAT' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">CAT</span>
                    </div>
                    <div style="width:120px;display: inline-block; margin-bottom:30px;">
                        <input style="margin-left:35px;" type='checkbox' id='seal-PPZ' name='drugseal' value='PPZ' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">PPZ</span>
                    </div>
                    <br />
                    <div style="width:120px;display: inline-block;">
                        <input type='checkbox' id='seal-NPS' name='drugseal' value='NPS' />
                        <span class="control-label" style="display:inline-block;height:33px; padding:7px;box-sizing:border-box;border:1px solid #CCC;text-align:center;">NPS</span>
                    </div>
                </div>
                <div style="clear:both;margin-bottom:20px;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" id="btnSeal">Seal</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    api.ready(function (model) {
        if (model != null) {
            $('[namedrug="time"]').text(model.Date);
            for (var key in model.TestResults) {
                var data = model.TestResults[key];
                data = data == null ? 'null' : data.toString().toLowerCase();
                $('[drugstatus][namedrug="' + key + '"]').attr('drugstatus', data);
            }
            //for (var key in model.Seal) {
            //    var data = model.Seal[key];
            //    data = data == null ? 'null' : data.toString().toLowerCase();
            //    $('[drugchecked][namedrug="' + key + '"]').attr('drugchecked', data);
            //}

            $('#seal-COCA').prop('checked', model.Seal['COCA']);
            $('#seal-BARB').prop('checked', model.Seal['BARB']);
            $('#seal-LSD').prop('checked', model.Seal['LSD']);
            $('#seal-METH').prop('checked', model.Seal['METH']);
            $('#seal-MTQL').prop('checked', model.Seal['MTQL']);
            $('#seal-PCP').prop('checked', model.Seal['PCP']);
            $('#seal-KET').prop('checked', model.Seal['KET']);
            $('#seal-BUPRE').prop('checked', model.Seal['BUPRE']);
            $('#seal-CAT').prop('checked', model.Seal['CAT']);
            $('#seal-PPZ').prop('checked', model.Seal['PPZ']);
            $('#seal-NPS').prop('checked', model.Seal['NPS']);
        };

        $("#btnSeal").click(function (e) {
            var COCA = $('#seal-COCA').is(":checked");
            var BARB = $('#seal-BARB').is(":checked");
            var LSD = $('#seal-LSD').is(":checked");
            var METH = $('#seal-METH').is(":checked");
            var MTQL = $('#seal-MTQL').is(":checked");
            var PCP = $('#seal-PCP').is(":checked");
            var KET = $('#seal-KET').is(":checked");
            var BUPRE = $('#seal-BUPRE').is(":checked");
            var CAT = $('#seal-CAT').is(":checked");
            var PPZ = $('#seal-PPZ').is(":checked");
            var NPS = $('#seal-NPS').is(":checked");
            api.server.SaveDrugTest(model.UserId, COCA, BARB, LSD, METH, MTQL, PCP, KET, BUPRE, CAT, PPZ, NPS, function () {
                $('#idQueueDrugs').modal('toggle');
            });
            e.preventDefault(); // avoid to execute the actual submit of the form.
        });
    });
</script>
<style type="text/css">
    .panel-data div {
        margin: 10px 0px;
        float: left;
        width: calc(100% / 4);
    }

    [drugstatus], [drugchecked] {
        position: relative;
        height: 20px;
        margin: 10px 0px;
    }

        [drugstatus]::before, [drugchecked]::before {
            content: " ";
            position: absolute;
            top: 0px;
            left: 0px;
            width: 20px;
            height: 20px;
            box-sizing: border-box;
            border: 2px solid #555;
            border-radius: 50%;
        }

        [drugchecked]::before {
            border-radius: 0px;
            box-shadow: inset 0 0 0 2px #FFF;
        }

    [drugstatus="true"]::before {
        background-color: forestgreen;
    }

    [drugchecked="true"]::before {
        background-color: #555;
    }

    [drugstatus="false"]::before, [drugchecked="false"]::before {
        background-color: red;
    }

    [drugstatus]::after, [drugchecked]::after {
        line-height: 20px;
        border: 2px solid #555;
        margin-left: 30px;
        padding: 0px 5px;
        content: attr(namedrug);
        box-sizing: border-box;
    }
</style>